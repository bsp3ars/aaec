<div class="row mt-4">
  <div class="col-xs-auto pl-2">
    <h1 class="my-auto">Books<%= if session[:admin] then " (#{@book_count})" end %></h1>
  </div>
  <% if @books.count < 3 && session[:admin] != true %>
    <div class="my-auto pl-3">
        <%= link_to 'New', new_book_path, class: "btn btn-primary" %>
    </div>
  <% elsif params[:id].nil? && session[:admin]  %>
    <div class=" ml-auto my-auto pl-3">
      <%= pagy_bootstrap_nav(@pagy_books).html_safe %>
    </div>
  <% end %>
</div>

<% if @books.count != 0 %>
<div class="row table-responsive">
  <table class="table table-hover">
    <thead>
      <tr>
      <th>Author(s)</th>
      <th>UC College</th>
      <th>UC Department(s) or Division(s)</th>
      <th>Work Title</th>
      <th>Other Title</th>
      <th>Publisher</th>
      <th>City</th>
      <th>Publication Date</th>
      <th>URL</th>
      <th>DOI</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= all_authors(book) %></td>
        <td><%= all_colleges(book.college_ids) %></td>
        <td><%= book.uc_department %></td>
        <td><%= book.work_title %></td>
        <td><%= book.other_title %></td>
        <td><%= book.publisher %></td>
        <td><%= book.city %></td>
        <td><%= book.publication_date %></td>
        <td><%= book.url %></td>
        <td><%= book.doi %></td>
        <td><%= link_to 'Show', book %></td>
        <td><%= link_to 'Edit', edit_book_path(book) %></td>
        <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<% end %>